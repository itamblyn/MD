#!/bin/tcsh

set file=$1

if (!(-e $1)) then
   echo "Could not find file '" $1 "'"
   exit(-1)
endif

set cmd="gnuplot.scr"
cat > $cmd << END
set data style linespoints
set xlabel 'density (rs)'
set xrange [3.06:0.50]
set yrange [0.5:*]
set ylabel 'r/2rs'
set nokey
plot \
"$file" u 1:(\$2/(\$1*0.529177*2)), "$file" u 1:(\$3/(\$1*0.529177*2)), \
"$file" u 1:(\$4/(\$1*0.529177*2)), "$file" u 1:(\$5/(\$1*0.529177*2)), \
"$file" u 1:(\$6/(\$1*0.529177*2)), "$file" u 1:(\$7/(\$1*0.529177*2)), \
"$file" u 1:(\$8/(\$1*0.529177*2)), "$file" u 1:(\$9/(\$1*0.529177*2)), \
"$file" u 1:(\$10/(\$1*0.529177*2)), "$file" u 1:(\$11/(\$1*0.529177*2)), \
"$file" u 1:(\$12/(\$1*0.529177*2)), "$file" u 1:(\$13/(\$1*0.529177*2)), \
"$file" u 1:(\$14/(\$1*0.529177*2)), "$file" u 1:(\$15/(\$1*0.529177*2)), \
"$file" u 1:(\$16/(\$1*0.529177*2)), "$file" u 1:(\$17/(\$1*0.529177*2)), \
"$file" u 1:(\$18/(\$1*0.529177*2)), "$file" u 1:(\$19/(\$1*0.529177*2)), \
"$file" u 1:(\$20/(\$1*0.529177*2)), "$file" u 1:(\$21/(\$1*0.529177*2)), \
"$file" u 1:(\$22/(\$1*0.529177*2)), "$file" u 1:(\$23/(\$1*0.529177*2)), \
"$file" u 1:(\$24/(\$1*0.529177*2)), "$file" u 1:(\$25/(\$1*0.529177*2)), \
"$file" u 1:(((\$2 + \$3 + \$4 + \$5 + \$6 + \$7 + \$8 + \$9 + \$10 + \$11 + \$12 + \$13)/12)/(\$1*0.529177*2)) with lines lt -1

pause -1 "Showing $file.\nPress enter to quit"
quit
END


gnuplot $cmd

\rm $cmd
